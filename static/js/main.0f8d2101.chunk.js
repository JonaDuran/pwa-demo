(this["webpackJsonppwa-demo"]=this["webpackJsonppwa-demo"]||[]).push([[0],{10:function(e,t,n){e.exports=n(20)},15:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),c=n.n(a),o=n(8),l=n.n(o),s=(n(15),n(4)),i=n(1),u=n.n(i),d=n(2),p=new(n(9).a)("pwa-demo");p.version(1).stores({countries:"++id, numericCode, name, capital, region, *altSpellings"}),p.version(2).stores({units:"c_ClaveUnidad, Nombre"}),p.version(3).stores({products:"c_ClaveProdServ, Descripci\xf3n"});var f=p;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=50;function v(){return(v=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.countries.count();case 2:if(e.t1=e.sent,e.t0=0===e.t1,!e.t0){e.next=6;break}e.t0=navigator.onLine;case 6:if(!e.t0){e.next=17;break}return"https://restcountries.eu/rest/v2/all",e.next=10,fetch("https://restcountries.eu/rest/v2/all",{cache:"no-cache"});case 10:return t=e.sent,e.next=13,t.json();case 13:return n=e.sent,document.querySelector("#message").textContent="Guardando ".concat(n.length," registros..."),e.next=17,g(n);case 17:return e.next=19,f.countries.limit(h).toArray();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.countries.clear();case 2:return e.next=4,f.countries.bulkAdd(t);case 4:console.log("end saveCountries");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(a.useState)({loading:!0,data:[]}),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){return v.apply(this,arguments)})().then((function(e){c({loading:!1,data:e})}))}),[]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({search:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.currentTarget.value||"",e.next=3,f.countries.where("name").startsWithIgnoreCase(r).or("region").startsWithIgnoreCase(r).or("capital").startsWithIgnoreCase(r).limit(h).toArray();case 3:a=e.sent,c({loading:!1,data:a});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},n)};n(6);function w(e){var t=e.countries;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Region"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Capital"))),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t+1),c.a.createElement("td",null,e.region),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.capital))})),t.length>=50&&c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"4"},"Solo se muestran 50 resultados"))))}var y=function(){var e=E(),t=e.loading,n=e.data,r=e.search;return c.a.createElement("main",null,c.a.createElement("h2",null,"PWA Demo"),c.a.createElement("div",{className:"card"},c.a.createElement("input",{placeholder:"Buscar...",onChange:r})),c.a.createElement("div",{className:"card"},t&&c.a.createElement("div",{id:"message",className:"p"},"Cargando..."),!t&&0===n.length&&c.a.createElement("div",{className:"p"},"No se pudieron cargar los datos"),n.length>0&&c.a.createElement(w,{countries:n})))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=50;function x(){return(x=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.products.count();case 2:if(e.t1=e.sent,e.t0=0===e.t1,!e.t0){e.next=6;break}e.t0=navigator.onLine;case 6:if(!e.t0){e.next=17;break}return"https://jonaduran.github.io/pwa-demo/c_ClaveProdServ.json",e.next=10,fetch("https://jonaduran.github.io/pwa-demo/c_ClaveProdServ.json",{cache:"no-cache"});case 10:return t=e.sent,e.next=13,t.json();case 13:return n=e.sent,document.querySelector("#message").textContent="Guardando ".concat(n.length," registros..."),e.next=17,k(n);case 17:return e.next=19,f.products.toArray();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.products.clear();case 2:return e.next=4,f.products.bulkAdd(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(){var e=Object(a.useState)({loading:"Cargando...",data:[]}),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){return x.apply(this,arguments)})().then((function(e){c({loading:!1,data:e.slice(0,j),fullData:e})}))}),[]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({search:function(){var e=Object(d.a)(u.a.mark((function e(t){var r,a,o,l,s,i,d,p,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t.currentTarget.value||"").toLowerCase(),a=[],o=0,r){e.next=7;break}a=n.fullData.slice(0,j),e.next=36;break;case 7:l=!0,s=!1,i=void 0,e.prev=10,d=n.fullData[Symbol.iterator]();case 12:if(l=(p=d.next()).done){e.next=22;break}if(f=p.value,!(String(f.c_ClaveProdServ).toLowerCase().includes(r)||String(f.Descripci\u00f3n).toLowerCase().includes(r))){e.next=19;break}if(a.push(f),!(++o>=50)){e.next=19;break}return e.abrupt("break",22);case 19:l=!0,e.next=12;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(10),s=!0,i=e.t0;case 28:e.prev=28,e.prev=29,l||null==d.return||d.return();case 31:if(e.prev=31,!s){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(28);case 36:c({loading:!1,data:a,fullData:n.fullData});case 37:case"end":return e.stop()}}),e,null,[[10,24,28,36],[29,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},n)};function S(e){var t=e.products;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Clave"),c.a.createElement("th",null,"Descripci\xf3n"))),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t+1),c.a.createElement("td",null,e.c_ClaveProdServ),c.a.createElement("td",null,e.Descripci\u00f3n))})),t.length>=50&&c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"3"},"Solo se muestran 50 resultados"))))}var D=function(){var e=P(),t=e.loading,n=e.data,r=e.search;return c.a.createElement("main",null,c.a.createElement("h2",null,"Cat\xe1logo de Productos y Servicios"),c.a.createElement("div",{className:"card"},c.a.createElement("input",{placeholder:"Buscar...",onChange:r})),c.a.createElement("div",{className:"card"},t&&c.a.createElement("div",{id:"message",className:"p"},"Cargando..."),!t&&0===n.length&&c.a.createElement("div",{className:"p"},"No se pudieron cargar los datos"),n.length>0&&c.a.createElement(S,{products:n})))};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A=50;function W(){return(W=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.units.count();case 2:if(e.t1=e.sent,e.t0=0===e.t1,!e.t0){e.next=6;break}e.t0=navigator.onLine;case 6:if(!e.t0){e.next=17;break}return"https://jonaduran.github.io/pwa-demo/c_ClaveUnidad.json",e.next=10,fetch("https://jonaduran.github.io/pwa-demo/c_ClaveUnidad.json",{cache:"no-cache"});case 10:return t=e.sent,e.next=13,t.json();case 13:return n=e.sent,document.querySelector("#message").textContent="Guardando ".concat(n.length," registros..."),e.next=17,U(n);case 17:return e.next=19,f.units.limit(A).toArray();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.units.clear();case 2:return e.next=4,f.units.bulkAdd(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(a.useState)({loading:!0,data:[]}),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){return W.apply(this,arguments)})().then((function(e){c({loading:!1,data:e})}))}),[]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({search:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.value||"",e.next=3,f.units.where("c_ClaveUnidad").startsWithIgnoreCase(n).or("Nombre").startsWithIgnoreCase(n).limit(A).toArray();case 3:r=e.sent,c({loading:!1,data:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},n)};function B(e){var t=e.units;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Clave"),c.a.createElement("th",null,"Nombre"))),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t+1),c.a.createElement("td",null,e.c_ClaveUnidad),c.a.createElement("td",null,e.Nombre))})),t.length>=50&&c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"3"},"Solo se muestran 50 resultados"))))}var I=function(){var e=L(),t=e.loading,n=e.data,r=e.search;return c.a.createElement("main",null,c.a.createElement("h2",null,"Cat\xe1logo de Unidades"),c.a.createElement("div",{className:"card"},c.a.createElement("input",{placeholder:"Buscar...",onChange:r})),c.a.createElement("div",{className:"card"},t&&c.a.createElement("div",{id:"message",className:"p"},"Cargando..."),!t&&0===n.length&&c.a.createElement("div",{className:"p"},"No se pudieron cargar los datos"),n.length>0&&c.a.createElement(B,{units:n})))},T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(c.a.createElement((function(){var e=Object(a.useState)(window.location.hash),t=Object(r.a)(e,2),n=t[0],o=t[1],l=function(e){return{href:"#"+e,onClick:function(){return o("#"+e)}}};return"#clear"===n&&(f.delete(),window.location.hash="",window.location.reload()),c.a.createElement("main",null,!n&&c.a.createElement("h3",null,"Seleccione una opci\xf3n"),c.a.createElement("div",{id:"menu"},c.a.createElement("a",l("countries"),"Pa\xedses"),c.a.createElement("a",l("units"),"Unidades"),c.a.createElement("a",l("products"),"Productos2"),c.a.createElement("a",l("clear"),"Borrar cach\xe9")),"#countries"===n&&c.a.createElement(y,null),"#units"===n&&c.a.createElement(I,null),"#products"===n&&c.a.createElement(D,null))}),null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pwa-demo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pwa-demo","/service-worker.js");T?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):R(t,e)}))}}()},6:function(e,t,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.0f8d2101.chunk.js.map